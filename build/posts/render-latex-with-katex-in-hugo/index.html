<!DOCTYPE html><html lang="en"><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Edwin's Blog</title>
		<link rel="stylesheet" href="https://hyperupcall.github.io/blog/css/open-color.css" media="all">
		<!-- TODO -->
		<link rel="stylesheet" type="text/css" href="/css/fonts.css">
		<link rel="stylesheet" type="text/css" href="/css/style.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" crossorigin="anonymous">

		<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd" crossorigin="anonymous"></script>
		<script defer="">
			function __initialize_katex() {
				renderMathInElement(document.body, {
					delimiters: [
						{ left: '$$', right: '$$', display: true },
						{ left: '$', right: '$', display: false },
					],
				})
			}
		</script>
		<script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="__initialize_katex()"></script>
	</head>
	<body>
		<header>
			<a href="/">
				<img src="https://hyperupcall.github.io/blog/images/logo.png" height="50px" width="50px" alt="Logo">
			</a>
			<nav>
				<a href="/">Home</a>
				<a href="/categories">Categories</a>
				<a href="/tags">Tags</a>
				<a href="/about">About</a>
			</nav>
		</header>
		<hr>
		<main class="article-content">
<p>This method will NO LONGER WORK on recent version of Hugo. I recommend reading <a href="https://mertbakir.gitlab.io/hugo/math-typesetting-in-hugo">this post</a> for up-to-date instructions.</p>
<p>Just recently, I added support to render LaTeX math equations with the rendering engine <a href="https://katex.org/">KaTeX</a> for this blog. I chose it over MathJax because it performs <a href="https://www.intmath.com/cg5/katex-mathjax-comparison.php">substantially faster</a>. To integrate KaTeX in my Hugo blog, I used the <a href="https://github.com/mmarkdown/mmark">Mmark</a> Markdown processor rather than Hugo's default <a href="https://github.com/russross/blackfriday">Blackfriday</a> processor.</p>
<p>There are three steps to follow so you can write LaTeX in markdown for KaTeX to use.</p>
<ol>
<li>Create a KateX partial</li>
<li>Integrate the KateX partial in your header or footer element</li>
<li>Activate the KaTeX partial in the markdown file</li>
</ol>
<p>What is a partial?
<a href="https://gohugo.io/templates/partials/">Hugo partials</a> are just single page templates. Think of them like <code>html</code> files that you can insert into any of your pages.</p>
<h2>Create a KaTex partial</h2>
<p>To get KaTex to work, you must import their JavaScript and CSS files. We're going to do this using Hugo partials. To do this, create a <code>katex.html</code> partial in your <code>layouts/partials</code> directory of your Hugo project. In this file, just import the <a href="https://katex.org/docs/browser.html">required files</a>.</p>
<pre><code class="language-html">&lt;!-- CSS File --&gt;
&lt;link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css"
    integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv"
    crossorigin="anonymous"
/&gt;

&lt;!-- JS Fle --&gt;
&lt;script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js"
    integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O"
    crossorigin="anonymous"
&gt;&lt;/script&gt;
</code></pre>
<h2>Integrating the KaTeX partial</h2>
<p>After creating the <code>katex.html</code> partial file, now you have to include it in some element that is common in all your built site files, such as a header or footer element.</p>
<p>I'm going to add it in my footer partial. So, create a <code>footer.html</code> partial in your <code>layouts/partials</code> directory, if you don't have one already. Since I have a theme, I copied the theme's <code>footer.html</code> partial and pasted it into my own <code>footer.html</code> partial. Note that your <code>footer.html</code> partial will override the theme's.</p>
<p>Then, add the following to the <code>footer.html</code> partial, outside of the body tag, but inside the html tag.</p>
<pre><code class="language-html">{{ if .Params.katex}}{{ partial "katex.html" . }}{{ end }}
</code></pre>
<p>My entire <code>footer.html</code> file ended up looking like the following.</p>
<pre><code class="language-html">&lt;footer class="footer"&gt;
  &lt;!-- Footer contents hidden for brevity --&gt;
&lt;/footer&gt;
&lt;/div&gt;

&lt;/body&gt;
{{ if .Params.katex}}{{ partial "katex.html" . }}{{ end }}
&lt;/html&gt;
</code></pre>
<p>Everything else except that one line was copied and pasted from my theme's <code>footer.html</code> file.</p>
<p>By adding the <code>katex.html</code> partial to the <code>footer.html</code> partial conditionally, now you can specify if you want to use KaTex for each markdown file separately. That way, you don't have to serve KaTeX JS and CSS files for blog posts that don't actually use them.</p>
<h2>Using the KaTex partial</h2>
<p>Now, using the KaTex partial is trivial. In your Hugo <a href="https://gohugo.io/content-management/front-matter/">front matter</a> (of any markdown file), add the following lines.</p>
<pre><code class="language-yaml">---
katex: true
markup: 'mmark'
---
</code></pre>
<p>Now, your <code>katex.html</code> partial will be used, which allows KaTex to render your LaTeX. Additionally, this activates the Mmark parsing engine, which is already integrated with Hugo. Using the Mmark parsing engine prevents <a href="https://gohugo.io/content-management/formats/#issues-with-markdown">the problems</a> the default Blackfriday parsing engine has with parsing LaTex in markdown.</p>
<h2>Writing LaTex in Markdown for Mmark</h2>
<p>Now you can write LaTex in markdown files! :tada:
It's intuitive writing LateX in markdown using the Mmark processor. You can display equations on the block level or inline. Note that you must use Mmark, or this will not work. Using the default Blackfriday processor will make all of these inline (using a single dollar sign as a delimiter will not work).</p>
<h3>Display Block</h3>
<p>Type equation on a single line, with top and bottom spaces. Use double dollar signs as delimiter.</p>
<pre><code class="language-md">The following

$$\int_{a}^{b} x^2 dx$$

Is an integral
</code></pre>
<p>The following</p>
<p>$$\int_{a}^{b} x^2 dx$$</p>
<p>Is an integral</p>
<h3>Display Inline</h3>
<p>Type the equation as per usual, nothing extra needed. Use double dollar signs as delimiter.</p>
<pre><code class="language-md">Integrate $$\int x^3 dx$$
</code></pre>
<p>Integrate $$\int x^3 dx$$</p>
<br>
It turns out, using KaTeX rather than MathJax was easier than I thought. I hope you found this helpful. :smile:

		</main>
		<footer>
			<ul class="footer-links">
				<li><a href="/index.xml" type="application/rss+xml" target="_blank"><i class="fa fa-rss"></i> RSS feed</a></li>
				<li><a href="/">Home</a></li>
				<li><a href="/about">About</a></li>
			</ul>
		</footer>
	

</body></html>