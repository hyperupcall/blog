<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.85.0"><title>Render LaTeX with KaTex in Hugo Blog - Edwin Kofler</title><meta property="og:title" content="Render LaTeX with KaTex in Hugo Blog - Edwin Kofler"><link href=https://hyperupcall.github.io/blog/index.xml rel=alternate type=application/rss+xml title="Edwin Kofler"><link rel=stylesheet href=https://hyperupcall.github.io/blog/css/open-color.css media=all><link rel=stylesheet href=https://hyperupcall.github.io/blog/css/main.css media=all><link rel=stylesheet href=https://hyperupcall.github.io/blog/css/fonts.css></head><body><div class=wrapper><header class=header><nav class=nav><a href=https://hyperupcall.github.io/blog/ class=nav-logo><img src=https://hyperupcall.github.io/blog/images/logo.jpg width=50 height=50 alt=Logo></a><ul class=nav-links><li><a href=../../categories>Categories</a></li><li><a href=../../tags>Tags</a></li><li><a href=../../about/>About</a></li></ul></nav></header><main class=content role=main><article class=article><h1 class=article-title>Render LaTeX with KaTex in Hugo Blog</h1><div class=article-content><p>NOTICE: This method will NO LONGER WORK on recent version of Hugo. I recommend reading <a href=https://mertbakir.gitlab.io/hugo/math-typesetting-in-hugo>this post</a> for up-to-date instructions.</p><p>Just recently, I added support to render LaTeX math equations with the rendering engine <a href=https://katex.org/>KaTeX</a> for this blog. I chose it over MathJax because it performs <a href=https://www.intmath.com/cg5/katex-mathjax-comparison.php>substantially faster</a>. To integrate KaTeX in my Hugo blog, I used the <a href=https://github.com/mmarkdown/mmark>Mmark</a> Markdown processor rather than Hugo&rsquo;s default <a href=https://github.com/russross/blackfriday>Blackfriday</a> processor.</p><p>There are three steps to follow so you can write LaTeX in markdown for KaTeX to use.</p><ol><li>Create a KateX partial</li><li>Integrate the KateX partial in your header or footer element</li><li>Activate the KaTeX partial in the markdown file</li></ol><p>What is a partial?
<a href=https://gohugo.io/templates/partials/>Hugo partials</a> are just single page templates. Think of them like <code>html</code> files that you can insert into any of your pages.</p><h2 id=create-a-katex-partial>Create a KaTex partial</h2><p>To get KaTex to work, you must import their JavaScript and CSS files. We&rsquo;re going to do this using Hugo partials. To do this, create a <code>katex.html</code> partial in your <code>layouts/partials</code> directory of your Hugo project. In this file, just import the <a href=https://katex.org/docs/browser.html>required files</a>.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#999;font-style:italic>&lt;!-- CSS File --&gt;</span>
&lt;<span style=color:#6ab825;font-weight:700>link</span>
	<span style=color:#bbb>rel</span>=<span style=color:#ed9d13>&#34;stylesheet&#34;</span>
	<span style=color:#bbb>href</span>=<span style=color:#ed9d13>&#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css&#34;</span>
	<span style=color:#bbb>integrity</span>=<span style=color:#ed9d13>&#34;sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv&#34;</span>
	<span style=color:#bbb>crossorigin</span>=<span style=color:#ed9d13>&#34;anonymous&#34;</span>
/&gt;

<span style=color:#999;font-style:italic>&lt;!-- JS Fle --&gt;</span>
&lt;<span style=color:#6ab825;font-weight:700>script</span>
	<span style=color:#bbb>defer</span>
	<span style=color:#bbb>src</span>=<span style=color:#ed9d13>&#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js&#34;</span>
	<span style=color:#bbb>integrity</span>=<span style=color:#ed9d13>&#34;sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O&#34;</span>
	<span style=color:#bbb>crossorigin</span>=<span style=color:#ed9d13>&#34;anonymous&#34;</span>
&gt;&lt;/<span style=color:#6ab825;font-weight:700>script</span>&gt;
</code></pre></div><h2 id=integrating-the-katex-partial>Integrating the KaTeX partial</h2><p>After creating the <code>katex.html</code> partial file, now you have to include it in some element that is common in all your built site files, such as a header or footer element.</p><p>I&rsquo;m going to add it in my footer partial. So, create a <code>footer.html</code> partial in your <code>layouts/partials</code> directory, if you don&rsquo;t have one already. Since I have a theme, I copied the theme&rsquo;s <code>footer.html</code> partial and pasted it into my own <code>footer.html</code> partial. Note that your <code>footer.html</code> partial will override the theme&rsquo;s.</p><p>Then, add the following to the <code>footer.html</code> partial, outside of the body tag, but inside the html tag.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ if .Params.katex}}{{ partial &#34;katex.html&#34; . }}{{ end }}
</code></pre></div><p>My entire <code>footer.html</code> file ended up looking like the following.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#6ab825;font-weight:700>footer</span> <span style=color:#bbb>class</span>=<span style=color:#ed9d13>&#34;footer&#34;</span>&gt;
  <span style=color:#999;font-style:italic>&lt;!-- Footer contents hidden for brevity --&gt;</span>
&lt;/<span style=color:#6ab825;font-weight:700>footer</span>&gt;
&lt;/<span style=color:#6ab825;font-weight:700>div</span>&gt;

&lt;/<span style=color:#6ab825;font-weight:700>body</span>&gt;
{{ if .Params.katex}}{{ partial &#34;katex.html&#34; . }}{{ end }}
&lt;/<span style=color:#6ab825;font-weight:700>html</span>&gt;
</code></pre></div><p>Everything else except that one line was copied and pasted from my theme&rsquo;s <code>footer.html</code> file.</p><p>By adding the <code>katex.html</code> partial to the <code>footer.html</code> partial conditionally, now you can specify if you want to use KaTex for each markdown file separately. That way, you don&rsquo;t have to serve KaTeX JS and CSS files for blog posts that don&rsquo;t actually use them.</p><h2 id=using-the-katex-partial>Using the KaTex partial</h2><p>Now, using the KaTex partial is trivial. In your Hugo <a href=https://gohugo.io/content-management/front-matter/>front matter</a> (of any markdown file), add the following lines.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#447fcf;text-decoration:underline>---</span><span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>katex</span>:<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>true</span><span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>markup</span>:<span style=color:#666> </span><span style=color:#ed9d13>&#39;mmark&#39;</span><span style=color:#666>
</span><span style=color:#666></span><span style=color:#447fcf;text-decoration:underline>---</span><span style=color:#666>
</span></code></pre></div><p>Now, your <code>katex.html</code> partial will be used, which allows KaTex to render your LaTeX. Additionally, this activates the Mmark parsing engine, which is already integrated with Hugo. Using the Mmark parsing engine prevents <a href=https://gohugo.io/content-management/formats/#issues-with-markdown>the problems</a> the default Blackfriday parsing engine has with parsing LaTex in markdown.</p><h2 id=writing-latex-in-markdown-for-mmark>Writing LaTex in Markdown for Mmark</h2><p>Now you can write LaTex in markdown files! ðŸŽ‰
It&rsquo;s intuitive writing LateX in markdown using the Mmark processor. You can display equations on the block level or inline. Note that you must use Mmark, or this will not work. Using the default Blackfriday processor will make all of these inline (using a single dollar sign as a delimiter will not work).</p><h3 id=display-block>Display Block</h3><p>Type equation on a single line, with top and bottom spaces. Use double dollar signs as delimiter.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>The following

$$\int_{a}^{b} x^2 dx$$

Is an integral
</code></pre></div><p>The following</p><p>$$\int_{a}^{b} x^2 dx$$</p><p>Is an integral</p><h3 id=display-inline>Display Inline</h3><p>Type the equation as per usual, nothing extra needed. Use double dollar signs as delimiter.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>Integrate $$\int x^3 dx$$
</code></pre></div><p>Integrate $$\int x^3 dx$$</p></div><ul class=article-taxonomy><hr><li><i class="fa fa-category"></i><a href=../../categories/update>update</a><a href=../../categories/tutorial>tutorial</a></li><li><i class="fa fa-tags"></i><a href=../../tags/latex>LaTeX</a><a href=../../tags/katex>KaTeX</a></li></article></main><footer class=footer><ul class=footer-links><li><a href=https://hyperupcall.github.io/blog/index.xml type=application/rss+xml target=_blank><i class="fa fa-rss"></i> RSS feed</a></li><li><a href=../../>Home</a></li><li><a href=https://hyperupcall.github.io/blog/site-notice>Site notice</a></li></ul></footer></div></body><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css integrity=sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js integrity=sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O crossorigin=anonymous></script><script>function __initialize_katex(){renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1}]})}</script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js integrity=sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF crossorigin=anonymous onload=__initialize_katex()></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-88833922-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-88833922-3")</script></html>